<!doctype html>
<html>
  <head>
    <title>Save User</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  </head>
  <body>
    <h2>User Registration</h2>

    <form id="userForm">
      <input type="text" placeholder="First Name" id="firstName" /><br /><br />
      <input type="text" placeholder="Last Name" id="lastName" /><br /><br />
      <input
        type="text"
        placeholder="Mobile (10 digits)"
        id="mobile"
      /><br /><br />
      <input type="email" placeholder="Email" id="email" /><br /><br />

      <h4>Address</h4>
      <input type="text" placeholder="Street" id="street" /><br /><br />
      <input type="text" placeholder="City" id="city" /><br /><br />
      <input type="text" placeholder="State" id="state" /><br /><br />
      <input type="text" placeholder="Country" id="country" /><br /><br />

      <input
        type="text"
        placeholder="Login ID (8 chars)"
        id="loginId"
      /><br /><br />
      <input type="password" placeholder="Password" id="password" /><br /><br />

      <button type="button" onclick="saveUser()">Save</button>
    </form>

    <script>
      function saveUser() {
        const data = {
          firstName: $("#firstName").val(),
          lastName: $("#lastName").val(),
          mobile: $("#mobile").val(),
          email: $("#email").val(),
          address: {
            street: $("#street").val(),
            city: $("#city").val(),
            state: $("#state").val(),
            country: $("#country").val(),
          },
          loginId: $("#loginId").val(),
          password: $("#password").val(),
        };

        $.ajax({
          url: "/api/saveUser",
          type: "POST",
          contentType: "application/json",
          data: JSON.stringify(data),
          success: function (res) {
            alert(res.message);
            $("#userForm")[0].reset();
          },
          error: function (err) {
            alert("Error: " + err.responseJSON.error);
          },
        });
      }
    </script>
  </body>
</html>
